<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì•ˆì „ì ê²€í‘œ ìƒì„±ê¸° - Test Document Generator</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: "Malgun Gothic", "Apple SD Gothic Neo", sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 400px 1fr;
      gap: 20px;
    }
    .controls {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      height: fit-content;
      position: sticky;
      top: 20px;
    }
    .controls h2 {
      margin-top: 0;
      color: #2563eb;
    }
    .form-group {
      margin-bottom: 15px;
    }
    .form-group label {
      display: block;
      font-weight: bold;
      margin-bottom: 5px;
      font-size: 14px;
    }
    .form-group input, .form-group select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }
    .form-group button {
      width: 100%;
      padding: 12px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
    }
    .form-group button:hover {
      background: #1d4ed8;
    }
    .form-group button.secondary {
      background: #10b981;
    }
    .form-group button.secondary:hover {
      background: #059669;
    }
    .preset-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      margin-bottom: 20px;
    }
    .preset-btn {
      padding: 8px;
      background: #f3f4f6;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.2s;
    }
    .preset-btn:hover {
      background: #e5e7eb;
      border-color: #2563eb;
    }

    /* Document Styles */
    .document {
      background: white;
      padding: 40px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      min-height: 800px;
    }
    .document h1 {
      color: #2563eb;
      border-bottom: 3px solid #2563eb;
      padding-bottom: 10px;
      margin-bottom: 30px;
    }
    .info-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 30px;
    }
    .info-table th, .info-table td {
      border: 1px solid #333;
      padding: 10px;
      text-align: left;
    }
    .info-table th {
      background: #f0f0f0;
      font-weight: bold;
      width: 20%;
    }
    .checklist-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 30px;
    }
    .checklist-table th, .checklist-table td {
      border: 1px solid #333;
      padding: 12px 8px;
      text-align: center;
    }
    .checklist-table th {
      background: #f0f0f0;
      font-weight: bold;
    }
    .checklist-table td:first-child {
      text-align: left;
      padding-left: 12px;
    }
    .checklist-table .check-col {
      width: 80px;
    }
    .signature-section {
      margin-top: 50px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
    }
    .signature-box {
      border: 1px solid #ddd;
      padding: 20px;
      border-radius: 4px;
    }
    .signature-box h3 {
      margin-top: 0;
      color: #1f2937;
      font-size: 16px;
    }
    .signature-line {
      border-top: 1px solid #333;
      margin-top: 40px;
      padding-top: 10px;
      text-align: center;
      color: #666;
    }
    @media print {
      body { background: white; }
      .container { grid-template-columns: 1fr; }
      .controls { display: none; }
      .document { box-shadow: none; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Controls Panel -->
    <div class="controls">
      <h2>ğŸ“‹ ë¬¸ì„œ ìƒì„±ê¸°</h2>

      <div class="preset-buttons">
        <button class="preset-btn" onclick="loadPreset('valid')">âœ… Valid</button>
        <button class="preset-btn" onclick="loadPreset('violation')">âŒ Violation</button>
        <button class="preset-btn" onclick="loadPreset('contradiction')">âš ï¸ Contradiction</button>
        <button class="preset-btn" onclick="loadPreset('na_pattern')">â“ N/A Pattern</button>
      </div>

      <div class="form-group">
        <label>ì ê²€ì¼ì</label>
        <input type="date" id="date" value="2026-01-27">
      </div>

      <div class="form-group">
        <label>í˜„ì¥ëª…</label>
        <input type="text" id="siteName" value="ê¹€í¬ í•œê°•ì‹ ë„ì‹œ Aê³µêµ¬" placeholder="ì˜ˆ: ê¹€í¬ í•œê°•ì‹ ë„ì‹œ Aê³µêµ¬">
      </div>

      <div class="form-group">
        <label>ì‘ì—…ë‚´ìš©</label>
        <input type="text" id="workContent" value="ì² ê³¨ êµ¬ì¡°ë¬¼ ì„¤ì¹˜ ì‘ì—…" placeholder="ì˜ˆ: ì² ê³¨ êµ¬ì¡°ë¬¼ ì„¤ì¹˜ ì‘ì—…">
      </div>

      <div class="form-group">
        <label>ì‘ì—…ì¸ì›</label>
        <input type="text" id="workers" value="5ëª…" placeholder="ì˜ˆ: 5ëª…">
      </div>

      <div class="form-group">
        <label>ì ê²€ì</label>
        <input type="text" id="inspector" value="ê¹€ì•ˆì „" placeholder="ì˜ˆ: ê¹€ì•ˆì „">
      </div>

      <div class="form-group">
        <label>ë‹´ë‹¹ì ì„œëª…</label>
        <select id="sig1">
          <option value="present">ìˆìŒ</option>
          <option value="missing">ì—†ìŒ</option>
        </select>
      </div>

      <div class="form-group">
        <label>í˜„ì¥ì†Œì¥ ì„œëª…</label>
        <select id="sig2">
          <option value="present">ìˆìŒ</option>
          <option value="missing">ì—†ìŒ</option>
        </select>
      </div>

      <div class="form-group">
        <button onclick="updateDocument()">ğŸ“ ë¬¸ì„œ ì—…ë°ì´íŠ¸</button>
        <button class="secondary" onclick="window.print()">ğŸ–¨ï¸ PDFë¡œ ì €ì¥</button>
      </div>

      <p style="font-size: 12px; color: #666; margin-top: 20px;">
        <strong>ì‚¬ìš©ë²•:</strong><br>
        1. ì›í•˜ëŠ” ê°’ ì…ë ¥<br>
        2. "ë¬¸ì„œ ì—…ë°ì´íŠ¸" í´ë¦­<br>
        3. "PDFë¡œ ì €ì¥" í´ë¦­í•˜ì—¬ PDF ìƒì„±<br>
        4. ë˜ëŠ” ìŠ¤í¬ë¦°ìƒ· ì°ì–´ì„œ ì‚¬ìš©
      </p>
    </div>

    <!-- Document Preview -->
    <div class="document" id="document">
      <h1>ì‚°ì—…ì•ˆì „ ì ê²€í‘œ</h1>
      <p style="text-align: right; color: #666;">ë¬¸ì„œë²ˆí˜¸: DOC-2026-001</p>

      <table class="info-table">
        <tr>
          <th>ì ê²€ì¼ì</th>
          <td id="doc-date">2026-01-27</td>
          <th>í˜„ì¥ëª…</th>
          <td id="doc-site">ê¹€í¬ í•œê°•ì‹ ë„ì‹œ Aê³µêµ¬</td>
        </tr>
        <tr>
          <th>ì‘ì—…ë‚´ìš©</th>
          <td colspan="3" id="doc-work">ì² ê³¨ êµ¬ì¡°ë¬¼ ì„¤ì¹˜ ì‘ì—…</td>
        </tr>
        <tr>
          <th>ì‘ì—…ì¸ì›</th>
          <td id="doc-workers">5ëª…</td>
          <th>ì ê²€ì</th>
          <td id="doc-inspector">ê¹€ì•ˆì „</td>
        </tr>
      </table>

      <h2 style="margin-top: 40px; color: #1f2937;">ì•ˆì „ ì ê²€ í•­ëª©</h2>
      <table class="checklist-table" id="checklist">
        <!-- Will be populated by JavaScript -->
      </table>

      <div class="signature-section">
        <div class="signature-box">
          <h3>ë‹´ë‹¹ì (Inspector)</h3>
          <div class="signature-line" id="sig1-display">[ì„œëª…] ê¹€ì•ˆì „</div>
        </div>
        <div class="signature-box">
          <h3>í˜„ì¥ì†Œì¥ (Site Manager)</h3>
          <div class="signature-line" id="sig2-display">[ì„œëª…] ë°•í˜„ì¥</div>
        </div>
      </div>

      <p style="margin-top: 50px; font-size: 12px; color: #999; text-align: center;">
        ë³¸ ë¬¸ì„œëŠ” ì‚°ì—…ì•ˆì „ë³´ê±´ë²• ì œ36ì¡°ì— ë”°ë¥¸ ì•ˆì „ì ê²€ ê¸°ë¡í‘œì…ë‹ˆë‹¤.
      </p>
    </div>
  </div>

  <script>
    // Checklist items with IDs matching validator.ts
    const checklistItems = [
      { id: "ppe_01", text: "ì•ˆì „ëª¨ ì°©ìš©", value: "checked" },
      { id: "fall_01", text: "ê³ ì†Œì‘ì—… ì‹¤ì‹œ (2m ì´ìƒ)", value: "checked" },
      { id: "ppe_03", text: "ì•ˆì „ëŒ€ ì°©ìš©", value: "unchecked" },
      { id: "fall_02", text: "ì¶”ë½ë°©í˜¸ì¥ì¹˜ ì„¤ì¹˜", value: "unchecked" },
      { id: "fire_01", text: "í™”ê¸°ì‘ì—… ì‹¤ì‹œ", value: "checked" },
      { id: "fire_02", text: "ì†Œí™”ê¸° ë¹„ì¹˜", value: "unchecked" },
      { id: "fire_03", text: "ë¶ˆí‹°ë¹„ì‚° ë°©ì§€ì¡°ì¹˜", value: "unchecked" },
      { id: "conf_01", text: "ë°€íê³µê°„ ì‘ì—…", value: "na" },
      { id: "conf_02", text: "ì‚°ì†Œë†ë„ ì¸¡ì •", value: "na" },
      { id: "exc_01", text: "êµ´ì°©ì‘ì—… ì‹¤ì‹œ", value: "na" },
      { id: "elec_02", text: "ì „ê¸°ì‘ì—… ì‹¤ì‹œ", value: "na" },
    ];

    function renderChecklist() {
      const table = document.getElementById('checklist');
      let html = `
        <tr>
          <th style="width: 50%">ì ê²€ í•­ëª©</th>
          <th class="check-col">ì í•©<br>(âœ”)</th>
          <th class="check-col">ë¶€ì í•©<br>(âœ–)</th>
          <th class="check-col">í•´ë‹¹ì—†ìŒ<br>(N/A)</th>
        </tr>
      `;

      checklistItems.forEach((item, idx) => {
        const checked = item.value === 'checked' ? 'âœ”' : '';
        const unchecked = item.value === 'unchecked' ? 'âœ–' : '';
        const na = item.value === 'na' ? 'N/A' : '';

        html += `
          <tr>
            <td>${idx + 1}. ${item.text}</td>
            <td onclick="setCheckbox(${idx}, 'checked')" style="cursor: pointer; font-size: 20px;">${checked}</td>
            <td onclick="setCheckbox(${idx}, 'unchecked')" style="cursor: pointer; font-size: 20px;">${unchecked}</td>
            <td onclick="setCheckbox(${idx}, 'na')" style="cursor: pointer;">${na}</td>
          </tr>
        `;
      });

      table.innerHTML = html;
    }

    function setCheckbox(idx, value) {
      checklistItems[idx].value = value;
      renderChecklist();
    }

    function updateDocument() {
      document.getElementById('doc-date').textContent = document.getElementById('date').value;
      document.getElementById('doc-site').textContent = document.getElementById('siteName').value;
      document.getElementById('doc-work').textContent = document.getElementById('workContent').value;
      document.getElementById('doc-workers').textContent = document.getElementById('workers').value;
      document.getElementById('doc-inspector').textContent = document.getElementById('inspector').value;

      const sig1 = document.getElementById('sig1').value;
      const sig2 = document.getElementById('sig2').value;
      const inspector = document.getElementById('inspector').value;

      document.getElementById('sig1-display').textContent = sig1 === 'present' ? `[ì„œëª…] ${inspector}` : '[ ë¯¸ì„œëª… ]';
      document.getElementById('sig2-display').textContent = sig2 === 'present' ? '[ì„œëª…] ë°•í˜„ì¥' : '[ ë¯¸ì„œëª… ]';
    }

    function loadPreset(type) {
      switch(type) {
        case 'valid':
          // All checks passed, no violations
          checklistItems[0].value = 'checked'; // helmet
          checklistItems[1].value = 'unchecked'; // no height work
          checklistItems[2].value = 'na'; // harness N/A
          checklistItems[3].value = 'na'; // fall protection N/A
          checklistItems[4].value = 'unchecked'; // no fire work
          checklistItems[5].value = 'na'; // extinguisher N/A
          checklistItems[6].value = 'na';
          checklistItems[7].value = 'na';
          checklistItems[8].value = 'na';
          checklistItems[9].value = 'na';
          checklistItems[10].value = 'na';
          document.getElementById('workContent').value = 'ì¼ìƒ ì•ˆì „ ì ê²€';
          document.getElementById('sig1').value = 'present';
          document.getElementById('sig2').value = 'present';
          break;

        case 'violation':
          // Height work but no harness - triggers rule_height_harness
          // Fire work but no extinguisher - triggers rule_fire_extinguisher
          checklistItems[0].value = 'checked';
          checklistItems[1].value = 'checked'; // height work YES
          checklistItems[2].value = 'unchecked'; // harness NO - VIOLATION!
          checklistItems[3].value = 'unchecked'; // protection NO - VIOLATION!
          checklistItems[4].value = 'checked'; // fire work YES
          checklistItems[5].value = 'unchecked'; // extinguisher NO - VIOLATION!
          checklistItems[6].value = 'unchecked';
          checklistItems[7].value = 'na';
          checklistItems[8].value = 'na';
          checklistItems[9].value = 'na';
          checklistItems[10].value = 'na';
          document.getElementById('workContent').value = 'ì² ê³¨ êµ¬ì¡°ë¬¼ ì„¤ì¹˜ ì‘ì—… (10ì¸µ ë†’ì´)';
          document.getElementById('sig1').value = 'present';
          document.getElementById('sig2').value = 'present';
          break;

        case 'contradiction':
          // No height work but fall protection installed - contradiction!
          checklistItems[0].value = 'checked';
          checklistItems[1].value = 'unchecked'; // height work NO
          checklistItems[2].value = 'checked'; // but harness YES - CONTRADICTION!
          checklistItems[3].value = 'checked'; // and protection YES - CONTRADICTION!
          checklistItems[4].value = 'unchecked'; // fire work NO
          checklistItems[5].value = 'checked'; // but extinguisher YES - CONTRADICTION!
          checklistItems[6].value = 'checked';
          checklistItems[7].value = 'na';
          checklistItems[8].value = 'na';
          checklistItems[9].value = 'na';
          checklistItems[10].value = 'na';
          document.getElementById('workContent').value = 'ì§€ìƒ ì‘ì—… (ê³ ì†Œì‘ì—… ì—†ìŒ)';
          document.getElementById('sig1').value = 'present';
          document.getElementById('sig2').value = 'present';
          break;

        case 'na_pattern':
          // Excessive N/A usage - suspicious pattern
          checklistItems.forEach(item => item.value = 'na');
          document.getElementById('workContent').value = 'ì¼ìƒ ì ê²€';
          document.getElementById('inspector').value = 'ê¹€ë§Œì ';
          document.getElementById('sig1').value = 'present';
          document.getElementById('sig2').value = 'missing'; // Also missing signature
          break;
      }
      renderChecklist();
      updateDocument();
    }

    // Initialize
    renderChecklist();
    updateDocument();
  </script>
</body>
</html>
